buildScript {
	repositories {
		jcenter()
	}
}

plugins {
	id "java"
	id "eclipse"

	id "com.github.spotbugs" version "2.0.0"
	id "project-report"
	id "jacoco"
	id "pmd"
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

//location from which third party libraries will be downloaded
repositories {
	jcenter()
}

//libraries that we want to use
dependencies {
	testImplementation "junit.jupiter:junit-jupiter:5.7.0"
	testImplementation "org.hamcrest:hamcrest-library:1.3"
	testImplementation "org.jsoup:jsoup:1.12.1"
	testImplementation "org.apache.poi:poi:3.12+"
	testImplementation "org.apache.poi:poi-ooxml:3.12+"
	testImplementation "com.cedarsoftware:json-io:4.10.1"
}

jar {
	baseName = "WebAnalysis"

	manifest {
		attributes(
			"Main-Class": "edu.odu.cs.cs350.Website"
		)
	}
}

test {
	reports {
		html.enabled = true
	}
	ignoreFailures = true

	testLogging {
		events "passed", "skipped", "failed", "standardOut", "standardError"
	}

	jacoco {
	}
}

javadoc {
	failOnError false
}

jacoco {
	toolVersion = "0.8.4"
}

jacocoTestReport {
	reports {
		html.enabled true
		xml.enabled true
		csv.enabled true
	}
}

// SpotBugs
spotBugsMain {
	ignoreFailures = true
	effort = "max"
	reportLevel = "medium"
	reports {
		xml.enabled = false
		html.enabled = true
	}
}

spotBugsTest.enabled = false
// End SpotBugs config

pmd {
	ignoreFailures = true
	ruleSets = [
		"category/java/bestPractices.xml",
		"category/java/codestyle.xml",
		"category/java/design.xml",
		"category/java/errorprone.xml",
		"category/java/performance.xml"
	]
}